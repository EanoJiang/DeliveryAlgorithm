# 外卖配送时间优化系统

这是一个简单的外卖配送时间优化系统，用C语言实现。系统通过合理规划骑手的取餐和送餐顺序，减少配送时间，提高配送效率。

## 功能特点

- **数据读取与处理**：
  - 从`delivery_data.txt`文件读取配送网络数据
  - 从`客户拼好饭点餐店面信息.txt`文件读取客户点餐信息
  - 按店面分组客户订单信息
  
- **配送优化算法**：
  - 支持用户设置骑手一次最多取1-5个餐
  - 自动计算最优起始店面
  - 贪心算法规划最短配送路径，完成所有订单
  
- **路径计算与显示**：
  - 计算并显示最优配送路径，用`->`连接路径打印出来
  - 计算总配送距离
  - 输出骑手的详细取餐送餐过程
  
- **数据持久化**：
  - 将配送路径图以邻接矩阵形式保存为CSV格式(`optimal_routes.csv`)

## 如何使用

1. 编译程序：
   ```bash
   gcc main.c -o delivery_optimizer
   ```

2. 运行程序：
   ```bash
   ./delivery_optimizer
   ```

3. 根据提示输入参数：
   - 骑手一次最多能取的餐数量（1-5）

4. 查看结果：
   - 系统会自动计算最优起始店面
   - 显示完整的配送路径和总配送距离
   - 配送路径将保存在`optimal_routes.csv`文件中

## 输入文件格式

### delivery_data.txt

配送网络数据文件，包含餐厅和客户之间的距离信息。
格式：`[店面ID] [客户ID/店面ID] [距离]`

- 店面ID从1开始
- 客户ID从101开始

示例：
```
1 2 30     # 店面1到店面2的距离为30
1 101 15   # 店面1到客户101的距离为15
101 102 12 # 客户101到客户102的距离为12
```

### 客户拼好饭点餐店面信息.txt

客户点餐信息文件，包含每个客户从哪个店面点餐的信息。
格式：`[客户ID] [店面ID]`

示例：
```
101 1  # 客户101从店面1点餐
102 2  # 客户102从店面2点餐
```

## 算法说明

程序使用以下策略来找出最优配送路径：

1. 首先测试每个有订单的店面作为起始点，计算总配送距离，选择距离最短的作为最优起始店面
2. 优先送已取的餐
3. 如果没有已取的餐，尝试去最近的店面取餐
4. 取餐时，如果已达到最大取餐数量，则不再取更多的餐
5. 尽量最小化总配送距离

## 输出文件

- **optimal_routes.csv**：最优配送路径网络图（邻接矩阵形式）

## 可视化

系统包含一个Python脚本`visualize_graph.py`，可以将优化后的配送路径进行可视化展示：

1. 运行可视化脚本：
   ```bash
   python visualize_graph.py
   ```

2. 查看生成的图像：
   - `optimal_route_visualization.png`：最优配送路径可视化
   - `path_sequence_visualization.png`：路径顺序可视化
